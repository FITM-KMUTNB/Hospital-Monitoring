$(document).ready(function(){{var e=$("#sign").val();$("#device_id").val()}$("#name , #description , #min , #max").focus(function(){$("#btn-save").removeClass("completed"),$("#btn-nav").removeClass("show"),$("#btn-save").html("บันทึก")}),$("#btn-status-toggle").click(function(){var a=$("#device_id").val();$.ajax({url:"api.device.php",cache:!1,dataType:"json",type:"POST",data:{calling:"device",action:"status_toggle",device_id:a,sign:e},error:function(){console.log("Request Error")}}).done(function(){location.reload()})}),$("#btn-notify-toggle").click(function(){var a=$("#device_id").val();$.ajax({url:"api.device.php",cache:!1,dataType:"json",type:"POST",data:{calling:"device",action:"notify_toggle",device_id:a,sign:e},error:function(){console.log("Request Error")}}).done(function(){location.reload()})}),$("#btn-token-reset").click(function(){if(!confirm("คุณต้องการคีย์ใหม่ ใช่หรือไม่ ?"))return!1;var a=$("#device_id").val();$.ajax({url:"api.device.php",cache:!1,dataType:"json",type:"POST",data:{calling:"device",action:"token_reset",device_id:a,sign:e},error:function(){console.log("Request Error")}}).done(function(){location.reload()})}),$("#btn-save").click(function(){var a=$("#name").val(),n=$("#description").val(),o=$("#space_id").val(),i=parseFloat($("#min").val()),t=parseFloat($("#max").val()),c=$("#device_id").val();return""==a?(alert("คุณจำเป็นต้องระบุชื่ออุปกรณ์!"),$("#name").focus(),!1):isNaN(i)?(alert("ไม่มีค่าอุณหภูมิต่ำที่สุด!"),$("#min").focus(),!1):isNaN(t)?(alert("ไม่มีค่าอุณหภูมิสูงที่สุด!"),$("#max").focus(),!1):parseFloat(i)>=parseFloat(t)?(alert("อุณหภูมิต่ำสุดไม่ควรเกินจุดสูงสุด!"),$("#min").focus(),!1):(""==c&&$("#btn-save").html("กำลังสร้างอุปกรณ์ใหม่..."),$.ajax({url:"api.device.php",cache:!1,dataType:"json",type:"POST",data:{calling:"device",action:"submit",name:a,description:n,space_id:o,min:i,max:t,warning:0,device_id:c,sign:e},error:function(e){console.log(e.responseText),console.log("Request Error")}}).done(function(e){console.log(e),0!=e.return?(console.log("Device created!"),setTimeout(function(){window.location="device/"+e.return},1e3)):($("#btn-save").addClass("completed"),$("#btn-save").html('บันทึกแล้ว<i class="fa fa-check" aria-hidden="true"></i>'),$("#btn-nav").addClass("-show"))}),void 0)})});