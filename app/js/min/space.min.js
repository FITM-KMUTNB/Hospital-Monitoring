$(document).ready(function(){var e=$("#sign").val();$("#name , #description , #line_token").focus(function(){$("#btn-save").removeClass("-completed"),$("#btn-save").html("บันทึก"),$("#btn-nav").removeClass("-show")}),$(".btn-zone-delete").click(function(){var a=$(this).parent().attr("data-id"),n=$("#space_id").val();return confirm("คุณต้องการลบสถานที่นี้ ใช่หรือไม่ ?")?($.ajax({url:"api.space.php",cache:!1,dataType:"json",type:"POST",data:{calling:"space",action:"delete_zone",zone_id:a,space_id:n,sign:e},error:function(){console.log("Request Error")}}).done(function(e){console.log(e),$("#zone-"+a).fadeOut(100)}),void 0):!1}),$(".btn-amin-delete").click(function(){var a=$(this).parent().attr("data-user"),n=$("#space_id").val();return confirm("คุณต้องการลบผู้ดูแล ใช่หรือไม่ ?")?(console.log("UserID "+a),$.ajax({url:"api.space.php",cache:!1,dataType:"json",type:"POST",data:{calling:"space",action:"remove_admin",user_id:a,space_id:n,sign:e},error:function(){console.log("Request Error")}}).done(function(e){console.log(e),$("#admin-"+a).fadeOut(100)}),void 0):!1}),$("#btn-zone-save").click(function(){var a=$("#zone_title").val(),n=$("#space_id").val();$.ajax({url:"api.space.php",cache:!1,dataType:"json",type:"POST",data:{calling:"space",action:"create_zone",title:a,space_id:n,sign:e},error:function(){console.log("Request Error")}}).done(function(e){console.log(e),location.reload()})}),$("#btn-admin-add").click(function(){var a=$("#email_admin").val(),n=$("#space_id").val();$.ajax({url:"api.space.php",cache:!1,dataType:"json",type:"POST",data:{calling:"space",action:"add_admin",email:a,space_id:n,sign:e},error:function(){console.log("Request Error")}}).done(function(e){console.log(e),location.reload()})}),$("#btn-save").click(function(){var a=$("#name").val(),n=$("#description").val(),o=$("#line_token").val(),t=$("#space_id").val();return""==a?(alert("คุณจำเป็นต้องใส่ชื่อกลุ่ม!"),$("#name").focus(),!1):(""==t&&$("#btn-save").html("กำลังสร้างกลุ่มใหม่..."),$.ajax({url:"api.space.php",cache:!1,dataType:"json",type:"POST",data:{calling:"space",action:"submit",name:a,description:n,line_token:o,space_id:t,sign:e},error:function(){console.log("Request Error")}}).done(function(e){console.log(e);var a=$("#return_device").val();0!=e.return?setTimeout(function(){window.location="space/"+e.return},2e3):($("#btn-save").addClass("completed"),$("#btn-save").html('บันทึกแล้ว<i class="fas fa-check"></i>'),""!=a&&setTimeout(function(){window.location="editdevice/"+a},1e3))}),void 0)})});